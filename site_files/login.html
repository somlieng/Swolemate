<html lang="en">
	
	<head>

		<meta charset="utf-8">
   		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<!-- Enable Mobile view with viewport meta tag -->
		<meta name="viewport" content="width=device-width, initial-scale=1">

		<!-- Title for the page -->
		<title>Login to SwoleMate</title>

    <script type="text/javascript" src="https://code.jquery.com/jquery-2.1.1.min.js"></script>
		<!-- Bootstrap Framework Dependencies -->
		
		<!-- Latest compiled and minified CSS-->

		<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css" integrity="sha512-dTfge/zgoMYpP7QbHy4gWMEGsbsdZeCXz7irItjcC3sPUFtf0kuFbDz/ixG7ArTxmDjLXDmezHubeNikyKGVyQ==" crossorigin="anonymous">

		<!-- Latest compiled and minified JavaScript -->

		<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js" integrity="sha512-K1qjQ+NcF2TYO/eI3M6v8EiNYZfA95pQumfvcVrTHtwQVDG+aHRqLi/ETn2uB+1JqwYqVG3LIvdm9lj6imS/pQ==" crossorigin="anonymous"></script>

		<link href="login.css" rel="stylesheet">



    <script type="text/javascript">
	$(document).ready(function() {

				if(localStorage.getItem("username") != null) {
		        	window.location = "/dashboard.html";
		        }


	  // define a generic Ajax error handler:
	  // http://api.jquery.com/ajaxerror/
	  $(document).ajaxError(function() {
	    alert("Sorry, there was a problem!");
	  });

	    $("#signinButton").click(function() {
	    $.ajax({
	      // The URL for the request -- note the simple REST API!
	      // all URLs are relative to http://localhost:1111/
	      url: "users/" + $("#inputUsername").val(),
	      type: "POST",
	      dataType : "text", // this URL returns a plain text string, not JSON
	      data : { 	username: $("#inputUsername").val(),
	      			password: $("#inputPassword").val()
	             },
	      success: function( data ) {
	        console.log("You received some data!", data);
	         if (data == 'OK') {
	          window.location= "/dashboard.html";
	       	localStorage.setItem("username", $("#inputUsername").val());
	      	localStorage.setItem("password", $("#inputPassword").val());
	       
	        }  else {
	          $("#status").html("Error: could not sign in user!");
	        }
	      },
	    });
	  });
	 
	});

	 </script>

	</head>

	<body >

		<div class="header">
	<a href="/home.html">
<img class = "toplogo" src="./icon/SwoleMateIcon.png"/>
</a>
<a href="/signup.html">
	<img class = "getStarted" src="./getStarted.png"/>
</a>
	<p class="member">Not a member?</p>
</div> <!-- /header -->
	
	<div class="container">

		<div class="row vertical-center-row">
        <div class="text-center col-md-4 col-md-offset-4">

		<!-- Adapted from sign in template form Bootstrap's example page -->

		<div class="panel panel-default" id="signin-panel">
  			<div class="panel-body" id="panel-bg">


		      <div class="form-signin">

		        <h2 class="form-signin-heading">Please sign in</h2>
		        <label for="inputUsername" class="sr-only">Username</label>
		        <input type="username" id="inputUsername" class="form-control" placeholder="Username" required autofocus> <br>
		        <label for="inputPassword" class="sr-only">Password</label>
		        <input type="password" id="inputPassword" class="form-control" placeholder="Password" required>
		        </br>
		        <button class="btn btn-lg btn-primary btn-block" type="submit" id="signinButton">Log in</button>
		  
		       

		      </div> 

		    </div>
		</div>

		</div>
		</div>

	    </div> <!-- /container -->
	
	<div class="footer"></div>
	</body>
</html>